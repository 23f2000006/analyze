# Data Processing and CI/CD Pipeline

This project demonstrates a robust data processing pipeline using Python with Pandas, integrated with GitHub Actions for automated quality checks, script execution, and result publication to GitHub Pages.

## Project Structure

The core components of this project include:
- `execute.py`: A Python script for data transformation.
- `data.xlsx`: The raw Excel data source.
- `.github/workflows/ci.yml`: GitHub Actions workflow for continuous integration and deployment.
- `data.csv`: An intermediate CSV file generated from `data.xlsx` by `execute.py`.
- `result.json`: The final processed output, generated by `execute.py` and published via GitHub Pages.

## Features

- **Data Transformation**: Converts `data.xlsx` to `data.csv` and performs further processing using Pandas.
- **Automated Linting**: Integrates `ruff` for code quality checks in the CI pipeline.
- **Continuous Integration**: GitHub Actions automatically runs linting and the data processing script on every push.
- **Automated Deployment**: Publishes the `result.json` output to GitHub Pages, making it easily accessible.

## Setup

### Prerequisites

Ensure you have Python 3.11+ installed.

1.  **Clone the repository:**
    ```bash
    git clone <your-repository-url>
    cd <your-repository-name>
    ```

2.  **Install dependencies:**
    It's recommended to use a virtual environment.
    ```bash
    python -m venv venv
    source venv/bin/activate # On Windows use `venv\Scripts\activate`
    pip install pandas ruff openpyxl
    ```
    - `pandas`: For data manipulation.
    - `ruff`: For code linting.
    - `openpyxl`: Required by Pandas to read `.xlsx` files.

## Running the Data Processing Script

The `execute.py` script performs the following actions:
1. Reads `data.xlsx`.
2. Converts and saves the data as `data.csv`.
3. Performs a non-trivial processing step on the data.
4. Outputs the final processed data as `result.json` to standard output.

To run the script locally:

```bash
python execute.py > result.json
```

This will generate `result.json` in your current directory.

## Continuous Integration and Deployment (CI/CD)

The project includes a GitHub Actions workflow (`.github/workflows/ci.yml`) that automates several steps:

1.  **Linting**: Uses `ruff` to check `execute.py` for style and potential errors. Results are shown in the CI log.
2.  **Script Execution**: Runs `python execute.py > result.json` to generate the processed output.
3.  **GitHub Pages Deployment**: The generated `result.json` file is published to GitHub Pages, typically accessible at `https://<your-username>.github.io/<your-repository-name>/result.json`.

The `result.json` file is *not* committed to the repository; it is dynamically generated and published by the CI pipeline.

### GitHub Actions Workflow (`.github/workflows/ci.yml`)

```yaml
name: CI/CD Pipeline

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write # Needed for actions/upload-pages-artifact
      pages: write    # Needed for deploy-pages
      id-token: write # Needed for deploy-pages

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11' # Ensure Python 3.11+ as requested

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pandas==2.3 ruff openpyxl # Ensure Pandas 2.3 as requested

      - name: Run Ruff Linter
        run: |
          ruff check execute.py
          ruff format execute.py --check

      - name: Run data processing script
        run: |
          python execute.py > result.json

      - name: Configure GitHub Pages
        uses: actions/configure-pages@v4

      - name: Upload result.json for deployment
        uses: actions/upload-pages-artifact@v3
        with:
          path: 'result.json' # Upload the generated result.json

      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

*Note: The actual `execute.py` would contain the fix for the non-trivial error and handle the `data.xlsx` to `data.csv` conversion and further processing. The `data.xlsx` would be the original Excel file.*

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.